<app-card>
  <div class="flex flex-col p-4 border-b border-b-gray-200" card-header>
    <div class="flex items-center justify-between">
      <h2 class="text-lg font-semibold">Ventas CFE</h2>
      <div class="flex gap-1">
        <p-floatlabel variant="on">
          <input
            pInputText
            id="on_tienda"
            [(ngModel)]="findTienda"
            autocomplete="off"
            type="text"
            pSize="small"
            (ngModelChange)="updateFiltros({ tienda: $event })"
          />
          <label for="on_tienda">Tienda</label>
        </p-floatlabel>
        <p-floatlabel variant="on">
          <p-datepicker
            [(ngModel)]="rangeDates"
            selectionMode="range"
            [readonlyInput]="true"
            [showButtonBar]="true"
            inputId="on_range"
            showIcon
            iconDisplay="input"
            size="small"
            dateFormat="dd/mm/yy"
            (ngModelChange)="changeFecha($event)"
          />
          <label for="on_range">Desde - Hasta</label>
        </p-floatlabel>
        <p-button size="small" (onClick)="getVentas()">
          <ng-template pTemplate="icon">
            <i class="material-symbols-outlined !text-[20px]">search</i>
          </ng-template>
        </p-button>
        <p-button label="Exportar" size="small" (onClick)="exportExcel()">
          <ng-template pTemplate="icon">
            <i class="material-symbols-outlined !text-[20px]">file_export</i>
          </ng-template>
        </p-button>
      </div>
    </div>
    <!-- @if (showPanel) {
      <div class="flex gap-2 transition-all duration-500 ease-in-out mt-2">
        <p-floatlabel variant="on">
          <p-datepicker
            [(ngModel)]="date2"
            inputId="lbl_desde"
            showIcon
            iconDisplay="input"
            size="small"
          />
          <label for="lbl_desde">Desde</label>
        </p-floatlabel>
        <p-floatlabel variant="on">
          <p-datepicker
            [(ngModel)]="date2"
            inputId="lbl_hasta"
            showIcon
            iconDisplay="input"
            size="small"
          />
          <label for="lbl_hasta">Hasta</label>
        </p-floatlabel>
      </div>
    } -->
  </div>
  <div card-content>
    <!-- <ng-scrollbar class="rounded-b-lg overflow-hidden h-[calc(100vh-157px)]"> -->
    <div class="rounded-b-lg overflow-hidden">
      <p-table
        [value]="listVentas()"
        stripedRows="true"
        [scrollable]="true"
        scrollHeight="calc(100vh - 150px)"
      >
        <ng-template #header>
          <tr class="text-md sticky top-0 z-10">
            <th>Tienda</th>
            <th>Fecha</th>
            <th>Venta</th>
          </tr>
        </ng-template>
        <ng-template #body let-venta>
          <tr class="text-xs">
            <td class="!py-2">{{ venta.tienda }}</td>
            <td class="!py-2">{{ venta.fecha }}</td>
            <td class="!py-2">{{ venta.venta | currency }}</td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</app-card>
